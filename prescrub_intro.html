<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>preSCRuB: a model-informed framework for study design recommendations</title>

<script src="prescrub_intro_files/header-attrs-2.14/header-attrs.js"></script>
<script src="prescrub_intro_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="prescrub_intro_files/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="prescrub_intro_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="prescrub_intro_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="prescrub_intro_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="prescrub_intro_files/navigation-1.1/tabsets.js"></script>
<link href="prescrub_intro_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="prescrub_intro_files/highlightjs-9.12.0/highlight.js"></script>
<link href="prescrub_intro_files/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="prescrub_intro_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">SCRuB</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fab fa-r-project"></span>
     
    Package
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="R-tutorial.html">Tutorial</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon-zoom-in"></span>
     
    QIIME2 Plugin
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="qiime2-intro.html">Inputs &amp; Outputs</a>
    </li>
    <li>
      <a href="QIIME2-Tutorial.html">Tutorial</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-binoculars"></span>
     
    Related documents
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://www.nature.com/articles/s41587-023-01696-w">SCRuB Manuscript</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contribute.html">
    <span class="fa fa-shower"></span>
     
    Contribute to SCRuB!
  </a>
</li>
<li>
  <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB/issues">
    <span class="fa fa-comment"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">preSCRuB: a model-informed framework for
study design recommendations</h1>

</div>


<style>
    body { background-color: #162138;
            text-color: whitesmoke}
</style>
<p><img src='images/preSCRUB_logo.png' align="right" height="300" /></p>
</center>
<hr />
<div id="welcome-to-prescrub" class="section level2">
<h2>Welcome to preSCRuB</h2>
<p>PreSCRuB is a tool for providing
<strong><span style="color:lightblue">recommendations for experimental
design</strong>, <strong><span style="color:lightblue">number of control
samples</strong> to collect, and
<strong><span style="color:lightblue">where to place them</strong> on a
sequencing plate. Use of preSCRuB during the experimental design process
will allow for stronger downstream applications of SCRuB. These
recommendations are computed by simulating thousands of microbiome
experiments, and <strong><span style="color:lightblue">identifying the
scenarios in which SCRuB performs best</strong>.</p>
<p><br><br> To obtain preSCRuB’s recommendations, the minimum
information needed is a set of assumptions regarding your data. More
refined preSCRuB recommendations can be implemented through installing
our preSCRuB package. <br></p>
</div>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
<p>preSCRuB is currently available through two avenues:</p>
<ol style="list-style-type: decimal">
<li>A publicly available <strong><span style="color:lightblue">Rshiny
application</strong>, hosted <a
href="https://prescrub.shinyapps.io/shinyApp/">here</a>. This is the
fastest option, and recommended for first-time users. <br></li>
<li>A package, which can be used to
<strong><span style="color:lightblue">locally host an Rshiny
application</strong> to run simulations for user-specific study
parameters. While this option takes longer, it allows for user-inputted
datasets to be incorporated during the simulations, and therefore
provides highly personalized recommendations.</li>
</ol>
<p> </p>
</div>
<div id="prescrub-on-rshiny" class="section level2">
<h2>preSCRuB on Rshiny</h2>
<p>In the <a href="https://prescrub.shinyapps.io/shinyApp/">Rshiny
app</a>, you will observe the interface shown below. By adjusting the
various parameters, you can obtain our plate design recommendation
(upper right-hand panel), and heatmaps summarizing the results across
their simulation parameters (bottom right). The parameters include the
expected diversity of the samples of interest, the diversity of the
contamination source, the expected taxonomic similarity between the
contamination source and the samples of interests, and the expected
levels of contamination and well-to-well leakage.</p>
<p><img src="images/preSCRuB_shiny_screenshot.png" /></p>
</div>
<div id="prescrub-on-your-machine" class="section level2">
<h2>preSCRuB on your machine</h2>
<div id="starting-prescrub-locally" class="section level3">
<h3>Starting preSCRuB Locally</h3>
<p>In some cases, it may be advantageous to run preSCRuB simulations on
even more specific situations, such as when you have pilot data. To
support such use cases, we offer the option to run preSCRuB on your
machine. To do this, begin by installing the SCRuB package, as described
on the <a href="index.html">home page</a>. Next, from an R environment,
install the additional preSCRuB prerequisites:</p>
<pre class="r"><code>install.packages( c(&#39;shiny&#39;,&#39;DT&#39;,&#39;ggrepel&#39;,&#39;shinycssloaders&#39;,&#39;shinythemes&#39;,&#39;philentropy&#39;,&#39;gridExtra&#39;,&#39;Pareto&#39;,&#39;cowplot&#39;,&#39;golem&#39;) )
devtools::install_github(&#39;biobakery/SparseDOSSA2&#39;)</code></pre>
<p>Once the prerequisites are installed, from the command line you can
clone the preSCRuB repository, and run the application:</p>
<pre class="bash"><code>git clone https://github.com/Shenhav-and-Korem-labs/preSCRuB.git
Rscript -e &#39;library(methods); shiny::runApp(&quot;preSCRuB/ShinyApp/&quot;, launch.browser = TRUE)&#39;</code></pre>
<p>The following window will pop up. This window contains the same set
of parameters in the public Rshiny app, with the additions of 1) free
text inputs for other parameters, 2) optional upload button to run
simulations on data similar to your data of interest (e.g., pilot data),
and 3) a bar to control the number of simulations to run.</p>
<p><img src="images/preSCRuB_package_initial.png" /></p>
</div>
<div id="uploading-user-samples" class="section level3">
<h3>Uploading user samples</h3>
<p>For a user to upload samples, select the browse button to search
through your local machine and choose a file of sample read counts in
<code>.csv</code> file, in in a 1-row-per-sample format. In this
example, we use the plasma data from the SCRuB tutorial (available in
our <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB/%5D">github
repository</a>). We recommend that users ensure their data format
matches those that we supply.</p>
<p><img src="images/preSCRuB_package_sample_upload.png" /></p>
</div>
<div id="running-simulations" class="section level3">
<h3>Running simulations</h3>
<p>Once content with the specified preSCRuB parameters, click on the
<code>Compute Plate Recommendations</code> to start running the
simulations to evalute SCRuB’s performance across different plate design
parameters. While the simulations are running, a loading icon will be
displayed as follows:</p>
<p><img src="images/preSCRuB_package_in_progress.png" /></p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
