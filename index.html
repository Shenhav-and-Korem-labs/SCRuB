<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>SCRuB: Source-tracking for Contamination Removal        in microBiomes</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/darkly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">SCRuB</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fab fa-r-project"></span>
     
    Package
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="R-tutorial.html">Tutorial</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="glyphicon glyphicon-zoom-in"></span>
     
    QIIME2 Plugin
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="qiime2-intro.html">Inputs &amp; Outputs</a>
    </li>
    <li>
      <a href="QIIME2-Tutorial.html">Tutorial</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-binoculars"></span>
     
    Related documents
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://www.nature.com/articles/s41587-023-01696-w">SCRuB Manuscript</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contribute.html">
    <span class="fa fa-shower"></span>
     
    Contribute to SCRuB!
  </a>
</li>
<li>
  <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB/issues">
    <span class="fa fa-comment"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">SCRuB: Source-tracking for Contamination Removal <br>      in <em>micro</em>Biomes</h1>

</div>


<style>
    body { 
        background-color: #162138;
            text-color: whitesmoke
            }
</style>
<img src='images/SCRuB_logo.png' align="right" height="300" /> <link rel="icon" type="image/png" href="images/SCRuB_logo.png" />
</center>
<hr />
<p><strong><span style="color:lightblue">We are currently in beta testing! Please report any issues you faced while using SCRuB in our <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB/issues">Issues Page</a>, or email <a href="gia2105@columbia.edu">gia2105@columbia.edu</a> .</span></strong></p>
<hr />
<p>Welcome to <a href="index.html"><em>SCRuB</em></a>! This is a software package for in silico <strong><span style="color:lightblue">removal of contamination</strong> from microbial datasets using process controls. <br></p>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>SCRuB is currently available through our <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB">github repository</a>, and can be installed using <code>devtools</code>:</p>
<pre class="r"><code>devtools::install_github(&quot;Shenhav-and-Korem-labs/SCRuB&quot;)
torch::install_torch()</code></pre>
<p>Additionally, we provide <em>SCRuB</em> as a QIIME2 plugin, which can be installed from a QIIME2 environment using pip:</p>
<pre class="bash"><code>pip install git+https://github.com/Shenhav-and-Korem-labs/q2-SCRuB.git</code></pre>
<p> </p>
</div>
<div id="getting-started" class="section level2">
<h2>Getting started</h2>
To start using <em>SCRuB</em>, follow along one of the following links, according to your preferences: <br>
<center>
<b> <font size="5"> <a href="R-tutorial.html">R tutorial</a></font> </b> <br> <b> <font size="5"> <a href="qiime2-intro.html">QIIME2 tutorial</a></font> </b> <br>
</center>
<p>These tutorials demonstrates the data format needed to set up SCRuB, how to run SCRuB’s core funtions, and how to interpret its results.</span></p>
<p> </p>
</div>
<div id="faqs" class="section level2">
<h2>FAQs</h2>
<p><em><span style="color:lightblue">Why SCRuB?</em> <br> Instead of trying to identify whether a taxa is categorically a contaminant, SCRuB models the composition of each contamination source (kit contamination, water contamination, etc.). We assume that taxa present together in a contamination source will be introduced together to other samples, and in similar proportions as in the contamination source. Therefore, if a control sample contains multiple bacteria, and a sample of interest contains only one of them and at high counts, that one bacteria is likely not a contaminant. This allows a more accurate and specific decontamination.</p>
<p><em><span style="color:lightblue">Should I use SCRuB only if I believe that there is substantial contamination?</em> <br> Our results demonstrate that SCRuB will not erroneously remove taxa if provided with unrelated controls. We therefore support incorporating SCRuB into your day-to-day analysis pipeline.</p>
<p><em><span style="color:lightblue">What does SCRuB do with the locations of the samples on the wells?</em><br> SCRuB uses these location to handle the important and common phenomenon of well-to-well leakage, in which material from biological samples leaks into controls during experimental procedures. Using the locations of samples during processing allows us to detect these cases.</p>
<p><em><span style="color:lightblue">What do I do if I have more than one type of control?</em><br> SCRuB supports multiple types of controls, and performs serial decontamination - each time performing decontamination using a different type of control. You can specify the order of decontamination yourself; we recommend to perform decontamination in the order in which contaminants are introduced.</p>
<p><em><span style="color:lightblue">We sequenced samples from two different studies on the same batch / plate / sequencing run. Should I run SCRuB just on the data from my study?</em><br> One of the key advantages of SCRuB is that it uses the shared information across all samples affected by a certain contamination source (e.g., an extraction batch). We therefore recommend that you supply SCRuB with <em>all</em> the relevant samples, including ones that are not related to a particular study - SCRuB uses the information in those samples to perform better decontamination.</p>
<p><em><span style="color:lightblue">Is there any benefit in providing SCRuB with more than one control sample?</em><br> Yes! SCRuB uses each control sample as an independent realization of the contamination source it represents. More samples allow us to infer the latent composition of these source more accurately. We recommend at least 2 controls per source, although more than two controls would often be appropriate.</p>
<p><em><span style="color:lightblue"> Does SCRuB work equally well on relative abundances vs compositional counts?</em><br> While SCRuB is expected to work with relative abundance or subsampled/rarefied counts, we recommend using raw counts. Using relative abundances gives all samples the same power to share information; while this assumption can be reasonable, it does deviate slightly from SCRuB’s validations.</p>
<p><em><span style="color:lightblue"> How should I run SCRuB on a large dataset spanning multiple plates?</em><br> SCRuB infers and removes one contamination source at a time. For every dataset, but particularly large ones, we recommend that you first consider the experimental design and the type of process controls collected. Then, run SCRuB separately for each contamination source. For example, if you have collected and sequenced empty collection kits, these likely apply to the entire study: use them to SCRuB the entire dataset, indicating the plate location of the relevant plate in which the controls were located. If you have collected and sequenced negative extraction controls, these likely apply to a specific plate / sequencing batch. Run SCRuB using these controls to decontaminate only the relevant plate / sequencing batch; to accomplish this, the SCRuB function should be called separately, once for each plate / batch.</p>
<p><em><span style="color:lightblue"> How should I run SCRuB if my samples’ well locations changed across processing stages?</em><br> If your plate structure varies across different processing stages (i.e. extraction vs amplification) and you have controls relevant to each, we recommend running the SCRuB function in multiple stages to account for the different spatial structures. SCRuB should be run separately for each set of relevant controls, and each sample should be SCRuB-ed once per contamination layer.</p>
<p><em><span style="color:lightblue"> How can I resolve issues setting up SCRuB on my machine?</em><br> While we encourage all users to contact us for assistance via our issues pages or via email, we can offer a few general suggestions to address some common issues: 1) To accommodate SCRuB’s dependencies, we require <code>R &gt;= 3.6</code>. If a user’s analysis requires an older version of R, we recommend maintaining two separate R environments on your machine. 2) A common issue with running the torch package can be resolved by running the R command <code>torch::install_torch()</code>. 3) We have implemented unit tests that successfully deploy SCRuB on five separate machines; upon request, we will be happy to provide assistance with information specific to your machine.</p>
<p> </p>
<p><!-- badges: start --> <a href="https://github.com/Shenhav-and-Korem-labs/SCRuB/actions/workflows/check-standard.yaml"><img src="https://github.com/Shenhav-and-Korem-labs/SCRuB/actions/workflows/check-standard.yaml/badge.svg" alt="R-CMD-check" /></a> <a href="https://app.codecov.io/gh/Shenhav-and-Korem-labs/SCRuB"><img src="https://codecov.io/gh/Shenhav-and-Korem-labs/SCRuB/graph/badge.svg" alt="Codecov test coverage" /></a> <!-- badges: end --></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
